<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jamoa — Ism, Familiya, Ish (Statik list)</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#94a3b8;--accent:#06b6d4}
    *{box-sizing:border-box}html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,Roboto,Arial;background:linear-gradient(180deg,#071023,#071634);color:#e6eef6}
    header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid rgba(255,255,255,0.03)}
    h1{margin:0;font-size:18px}
    .muted{color:var(--muted);font-size:13px}
    .controls{display:flex;gap:10px;align-items:center}
    .search{background:var(--card);padding:8px;border-radius:10px;display:flex;gap:8px;align-items:center}
    .search input{background:transparent;border:0;color:inherit;outline:none;width:260px}
    .chip{background:rgba(255,255,255,0.02);padding:7px 10px;border-radius:999px;font-size:13px;color:var(--muted);cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
    .chip.active{background:rgba(6,182,212,0.12);color:#dff9ff;border-color:rgba(6,182,212,0.18)}
    main{padding:20px}
    .toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;gap:12px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    @media(max-width:1100px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media(max-width:800px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:480px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:space-between;gap:10px;cursor:pointer;transition:transform .14s}
    .card:hover{transform:translateY(-6px)}
    .left{display:flex;gap:10px;align-items:center}
    .initial{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#2563eb);display:flex;align-items:center;justify-content:center;font-weight:700}
    .meta{min-width:0}
    .name{font-size:15px;margin:0}
    .role{font-size:13px;color:var(--muted);margin:4px 0 0 0}
    .actions{display:flex;gap:8px;align-items:center}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:var(--muted);cursor:pointer}
    .star{font-size:18px;color:var(--muted);cursor:pointer}
    .favorite{color:#ffd166}
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.7);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{width:min(520px,96%);background:#071428;border-radius:10px;padding:16px;border:1px solid rgba(255,255,255,0.03)}
    .modal h2{margin:0 0 8px 0}
    .small{font-size:13px}
    .empty{padding:40px;border-radius:10px;background:rgba(255,255,255,0.02);text-align:center;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>Jamoa</h1>
      <div class="muted small">Ism • Familiya • Ish — ro'yxat ichida oldindan yozilgan</div>
    </div>

    <div class="controls">
      <div class="search" role="search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.4"/></svg>
        <input id="searchInput" placeholder="Ism, familiya yoki ish bo'yicha qidirish...">
      </div>
      <div id="roleFilters" style="display:flex;gap:8px;align-items:center"></div>
      <button class="chip" id="resetBtn">Reset</button>
    </div>
  </header>

  <main>
    <div class="toolbar">
      <div style="display:flex;gap:8px;align-items:center">
        <div class="chip" id="sortBtn">Saralash: A→Z</div>
        <div class="chip" id="favFilter">Faqat favoritlar <span id="favCount" style="margin-left:6px;color:var(--accent)"></span></div>
      </div>

      <div style="display:flex;gap:8px;align-items:center">
        <!-- Note: no add/import/export buttons as requested -->
      </div>
    </div>

    <div id="grid" class="grid" aria-live="polite"></div>
    <div id="empty" class="empty" style="display:none">Hech qanday a'zo topilmadi.</div>
  </main>

  <!-- Detail modal (read-only) -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal" id="modal">
      <button id="closeModal" style="float:right;background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer">✕</button>
      <h2 id="modalName">Ism Familiya</h2>
      <p class="small muted" id="modalRole">Lavozim</p>
    </div>
  </div>

  <script>
    /***** Avvaldan yozilgan a'zolar (HTML ichidagi JS massiv) *****/
    const members = [
      {id:1, firstName:'Shohjahon', lastName:'Otaboyev', role:'Project Manager'},
      {id:2, firstName:'Ibratbek', lastName:'Shavkatov', role:'Frontend Engineer'},
      {id:3, firstName:'Maqsadbek', lastName:'Saparbayev', role:'Backend Engineer'},
      {id:4, firstName:'Nuraddin', lastName:'Abdusharipov', role:'Designer'}
    ];

    // State (favorites persisted locally but members list is static in code)
    let favs = new Set(JSON.parse(localStorage.getItem('team_static_favs_v1') || '[]'));
    let searchTerm = '';
    let activeRole = null;
    let showOnlyFavs = false;
    let sortAsc = true;

    // DOM refs
    const grid = document.getElementById('grid');
    const searchInput = document.getElementById('searchInput');
    const roleFilters = document.getElementById('roleFilters');
    const resetBtn = document.getElementById('resetBtn');
    const sortBtn = document.getElementById('sortBtn');
    const favFilter = document.getElementById('favFilter');
    const favCount = document.getElementById('favCount');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const closeModal = document.getElementById('closeModal');
    const modalName = document.getElementById('modalName');
    const modalRole = document.getElementById('modalRole');

    // Helpers
    function saveFavs(){ localStorage.setItem('team_static_favs_v1', JSON.stringify([...favs])); }

    function getRoles(){
      const set = new Set(members.map(m=>m.role).filter(Boolean));
      return [...set].sort((a,b)=>a.localeCompare(b));
    }

    function renderRoleFilters(){
      roleFilters.innerHTML = '';
      const roles = getRoles();
      roles.forEach(r=>{
        const btn = document.createElement('button');
        btn.className = 'chip' + (activeRole===r ? ' active' : '');
        btn.textContent = r;
        btn.onclick = ()=>{
          activeRole = (activeRole===r) ? null : r;
          render();
        };
        roleFilters.appendChild(btn);
      });
    }

    function matchesSearch(m, term){
      if(!term) return true;
      term = term.toLowerCase();
      return (m.firstName && m.firstName.toLowerCase().includes(term))
          || (m.lastName && m.lastName.toLowerCase().includes(term))
          || (m.role && m.role.toLowerCase().includes(term));
    }

    function render(){
      // filter
      let list = members.slice();
      if(activeRole) list = list.filter(m=>m.role === activeRole);
      if(searchTerm) list = list.filter(m=>matchesSearch(m, searchTerm));
      if(showOnlyFavs) list = list.filter(m=>favs.has(m.id));

      // sort
      list.sort((a,b)=>{
        const ka = (a.firstName+' '+a.lastName).toLowerCase();
        const kb = (b.firstName+' '+b.lastName).toLowerCase();
        return sortAsc ? ka.localeCompare(kb) : kb.localeCompare(ka);
      });

      // update fav count display
      favCount.textContent = `(${[...favs].length})`;

      // render grid
      grid.innerHTML = '';
      if(list.length === 0){
        document.getElementById('empty').style.display = 'block';
      } else {
        document.getElementById('empty').style.display = 'none';
      }

      list.forEach(m=>{
        const el = document.createElement('div');
        el.className = 'card';
        el.setAttribute('data-id', m.id);

        // click to open modal (detail)
        el.onclick = (e)=>{
          if(e.target.classList.contains('star')) return; // clicking star toggles fav
          openDetail(m);
        };

        const left = document.createElement('div'); left.className = 'left';
        const initial = document.createElement('div'); initial.className = 'initial';
        const initials = ((m.firstName||'')[0]||'') + ((m.lastName||'')[0]||'');
        initial.textContent = initials.toUpperCase();
        const meta = document.createElement('div'); meta.className = 'meta';
        const name = document.createElement('p'); name.className = 'name'; name.textContent = (m.firstName||'') + ' ' + (m.lastName||'');
        const role = document.createElement('p'); role.className = 'role'; role.textContent = m.role || '';
        meta.appendChild(name); meta.appendChild(role);
        left.appendChild(initial); left.appendChild(meta);

        const actions = document.createElement('div'); actions.className = 'actions';
        const star = document.createElement('div'); star.className = 'star';
        star.innerHTML = favs.has(m.id) ? '★' : '☆';
        if(favs.has(m.id)) star.classList.add('favorite');
        star.onclick = (ev)=>{
          ev.stopPropagation();
          if(favs.has(m.id)) favs.delete(m.id);
          else favs.add(m.id);
          saveFavs();
          render();
        };
        actions.appendChild(star);

        el.appendChild(left);
        el.appendChild(actions);
        grid.appendChild(el);
      });
    }

    function openDetail(m){
      modalName.textContent = (m.firstName||'') + ' ' + (m.lastName||'');
      modalRole.textContent = m.role || '';
      modalBackdrop.style.display = 'flex';
    }

    function closeDetail(){
      modalBackdrop.style.display = 'none';
    }

    // Event bindings
    searchInput.addEventListener('input', (e)=>{ searchTerm = e.target.value.trim(); render(); });
    resetBtn.addEventListener('click', ()=>{
      searchInput.value = '';
      searchTerm = '';
      activeRole = null;
      showOnlyFavs = false;
      sortAsc = true;
      sortBtn.textContent = 'Saralash: A→Z';
      favFilter.classList.remove('active');
      render();
    });

    sortBtn.addEventListener('click', ()=>{
      sortAsc = !sortAsc;
      sortBtn.textContent = sortAsc ? 'Saralash: A→Z' : 'Saralash: Z→A';
      render();
    });

    favFilter.addEventListener('click', ()=>{
      showOnlyFavs = !showOnlyFavs;
      favFilter.classList.toggle('active', showOnlyFavs);
      render();
    });

    closeModal.addEventListener('click', closeDetail);
    modalBackdrop.addEventListener('click', (e)=>{ if(e.target===modalBackdrop) closeDetail(); });

    // initial render
    renderRoleFilters();
    render();
  </script>
</body>
</html>
