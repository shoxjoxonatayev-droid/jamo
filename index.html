<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jamoa ‚Äî Shohjahon Dasturchilar Jamoasi</title>
  <style>
    :root{
      --bg:#050b18;
      --card:#0b1220;
      --muted:#94a3b8;
      --accent:#06b6d4;
      --glow:#00f5d4;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Poppins',system-ui,Roboto,Arial;
      background:radial-gradient(circle at top,#0a1225 0%,#030712 100%);
      color:#e6eef6;
      overflow-x:hidden;
      transition:background 0.6s;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:16px 20px;
      border-bottom:1px solid rgba(255,255,255,0.05);
      background:linear-gradient(135deg,#08122b,#0e1a3b);
      box-shadow:0 0 15px rgba(6,182,212,0.15);
      position:sticky;
      top:0;
      z-index:5;
    }
    h1{margin:0;font-size:20px;color:var(--accent);text-shadow:0 0 10px rgba(6,182,212,0.5)}
    .muted{color:var(--muted);font-size:13px}

    /* Search va filterlar */
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .search{background:var(--card);padding:8px 12px;border-radius:10px;display:flex;gap:8px;align-items:center;box-shadow:0 0 6px rgba(6,182,212,0.1)}
    .search input{background:transparent;border:0;color:inherit;outline:none;width:220px;font-size:14px}
    .chip{
      background:rgba(255,255,255,0.02);
      padding:7px 12px;
      border-radius:999px;
      font-size:13px;
      color:var(--muted);
      cursor:pointer;
      border:1px solid rgba(255,255,255,0.05);
      transition:all 0.3s ease;
    }
    .chip:hover{border-color:var(--glow);color:#fff;box-shadow:0 0 6px var(--glow)}
    .chip.active{
      background:rgba(6,182,212,0.2);
      color:#dff9ff;
      border-color:rgba(6,182,212,0.4);
      box-shadow:0 0 10px var(--accent);
    }

    main{padding:24px 20px;}
    .toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;gap:12px;flex-wrap:wrap}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;}

    /* Card */
    .card{
      background:linear-gradient(145deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));
      padding:16px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.04);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      cursor:pointer;
      transition:transform .25s ease, box-shadow .25s ease;
      box-shadow:0 0 10px rgba(0,255,255,0.05);
      animation:fadeIn .5s ease forwards;
    }
    .card:hover{
      transform:translateY(-6px) scale(1.02);
      box-shadow:0 0 15px rgba(0,255,255,0.15);
    }

    .left{display:flex;gap:10px;align-items:center}
    .initial{
      width:52px;height:52px;
      border-radius:12px;
      background:linear-gradient(135deg,var(--accent),#2563eb);
      display:flex;align-items:center;justify-content:center;
      font-weight:700;font-size:18px;
      box-shadow:0 0 10px rgba(6,182,212,0.4);
      animation:pulse 2s infinite ease-in-out;
    }
    .meta{min-width:0}
    .name{font-size:15px;margin:0;font-weight:600}
    .role{font-size:13px;color:var(--muted);margin:4px 0 0 0}
    .actions{display:flex;gap:8px;align-items:center}
    .star{font-size:20px;color:var(--muted);cursor:pointer;transition:transform .3s,color .3s}
    .star:hover{transform:scale(1.3);color:#ffd166}
    .favorite{color:#ffd166;text-shadow:0 0 8px #ffd166}

    /* Modal */
    .modal-backdrop{
      position:fixed;inset:0;
      background:rgba(2,6,23,0.8);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      backdrop-filter:blur(6px);
      animation:fadeIn 0.3s ease forwards;
    }
    .modal{
      width:min(520px,96%);
      background:#0a1328;
      border-radius:14px;
      padding:24px;
      border:1px solid rgba(255,255,255,0.05);
      box-shadow:0 0 20px rgba(6,182,212,0.25);
      transform:scale(0.8);
      opacity:0;
      animation:modalPop 0.4s forwards ease;
    }
    .modal h2{margin:0 0 8px 0;color:var(--glow)}
    .small{font-size:13px;color:var(--muted)}
    .empty{
      padding:40px;
      border-radius:10px;
      background:rgba(255,255,255,0.02);
      text-align:center;
      color:var(--muted);
      animation:fadeIn .4s ease;
    }

    /* Animations */
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(10px)}
      to{opacity:1;transform:translateY(0)}
    }
    @keyframes pulse{
      0%,100%{box-shadow:0 0 10px rgba(6,182,212,0.2);}
      50%{box-shadow:0 0 20px rgba(6,182,212,0.5);}
    }
    @keyframes modalPop{
      to{transform:scale(1);opacity:1;}
    }

    button#closeModal{
      float:right;
      background:transparent;
      border:0;
      color:var(--muted);
      font-size:18px;
      cursor:pointer;
      transition:color 0.2s;
    }
    button#closeModal:hover{color:#fff}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>üíª Dasturchilar Jamoasi</h1>
      <div class="muted small">Ism ‚Ä¢ Familiya ‚Ä¢ Lavozim ‚Äî dinamik ro'yxat</div>
    </div>

    <div class="controls">
      <div class="search" role="search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.4"/></svg>
        <input id="searchInput" placeholder="Ism, familiya yoki ish bo'yicha qidirish...">
      </div>
      <div id="roleFilters" style="display:flex;gap:8px;align-items:center"></div>
      <button class="chip" id="resetBtn">üîÑ Reset</button>
    </div>
  </header>

  <main>
    <div class="toolbar">
      <div style="display:flex;gap:8px;align-items:center">
        <div class="chip" id="sortBtn">Saralash: A‚ÜíZ</div>
        <div class="chip" id="favFilter">‚≠ê Faqat favoritlar <span id="favCount" style="margin-left:6px;color:var(--accent)"></span></div>
      </div>
    </div>

    <div id="grid" class="grid" aria-live="polite"></div>
    <div id="empty" class="empty" style="display:none">Hech qanday a'zo topilmadi.</div>
  </main>

  <div id="modalBackdrop" class="modal-backdrop">
    <div class="modal" id="modal">
      <button id="closeModal">‚úï</button>
      <h2 id="modalName">Ism Familiya</h2>
      <p class="small" id="modalRole">Lavozim</p>
    </div>
  </div>

  <script>
    const members = [
      {id:1, firstName:'Shohjahon', lastName:'Otaboyev', role:'Frontend Dasturchi'},
      {id:2, firstName:'Ibratbek', lastName:'Shavkatov', role:'Fullstack Developer'},
      {id:3, firstName:'Maqsadbek', lastName:'Saparboyev', role:'Backend Engineer'},
      {id:4, firstName:'Nuriddin', lastName:'Abdusharipov', role:'UI/UX Dizayner'}
    ];

    let favs = new Set(JSON.parse(localStorage.getItem('team_static_favs_v1') || '[]'));
    let searchTerm = '', activeRole = null, showOnlyFavs = false, sortAsc = true;

    const grid = document.getElementById('grid');
    const searchInput = document.getElementById('searchInput');
    const roleFilters = document.getElementById('roleFilters');
    const resetBtn = document.getElementById('resetBtn');
    const sortBtn = document.getElementById('sortBtn');
    const favFilter = document.getElementById('favFilter');
    const favCount = document.getElementById('favCount');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const closeModal = document.getElementById('closeModal');
    const modalName = document.getElementById('modalName');
    const modalRole = document.getElementById('modalRole');

    function saveFavs(){ localStorage.setItem('team_static_favs_v1', JSON.stringify([...favs])); }
    function getRoles(){ return [...new Set(members.map(m=>m.role))].sort(); }

    function renderRoleFilters(){
      roleFilters.innerHTML='';
      getRoles().forEach(r=>{
        const btn=document.createElement('button');
        btn.className='chip'+(activeRole===r?' active':'');
        btn.textContent=r;
        btn.onclick=()=>{activeRole=(activeRole===r)?null:r;render();}
        roleFilters.appendChild(btn);
      });
    }

    function matchesSearch(m,t){if(!t)return true;t=t.toLowerCase();return m.firstName.toLowerCase().includes(t)||m.lastName.toLowerCase().includes(t)||m.role.toLowerCase().includes(t);}

    function render(){
      let list=members.slice();
      if(activeRole)list=list.filter(m=>m.role===activeRole);
      if(searchTerm)list=list.filter(m=>matchesSearch(m,searchTerm));
      if(showOnlyFavs)list=list.filter(m=>favs.has(m.id));
      list.sort((a,b)=>sortAsc?(a.firstName+a.lastName).localeCompare(b.firstName+b.lastName):(b.firstName+b.lastName).localeCompare(a.firstName+a.lastName));
      favCount.textContent=`(${[...favs].length})`;

      grid.innerHTML='';
      document.getElementById('empty').style.display=list.length?'none':'block';
      list.forEach(m=>{
        const el=document.createElement('div');
        el.className='card';
        el.onclick=e=>{if(e.target.classList.contains('star'))return;openDetail(m);}
        const left=document.createElement('div');left.className='left';
        const initial=document.createElement('div');initial.className='initial';initial.textContent=(m.firstName[0]+m.lastName[0]).toUpperCase();
        const meta=document.createElement('div');meta.className='meta';
        const name=document.createElement('p');name.className='name';name.textContent=m.firstName+' '+m.lastName;
        const role=document.createElement('p');role.className='role';role.textContent=m.role;
        meta.appendChild(name);meta.appendChild(role);
        left.appendChild(initial);left.appendChild(meta);
        const actions=document.createElement('div');actions.className='actions';
        const star=document.createElement('div');star.className='star';star.innerHTML=favs.has(m.id)?'‚òÖ':'‚òÜ';if(favs.has(m.id))star.classList.add('favorite');
        star.onclick=ev=>{ev.stopPropagation();favs.has(m.id)?favs.delete(m.id):favs.add(m.id);saveFavs();render();}
        actions.appendChild(star);
        el.appendChild(left);el.appendChild(actions);
        grid.appendChild(el);
      });
    }

    function openDetail(m){
      modalName.textContent=m.firstName+' '+m.lastName;
      modalRole.textContent=m.role;
      modalBackdrop.style.display='flex';
    }
    function closeDetail(){modalBackdrop.style.display='none';}

    searchInput.addEventListener('input',e=>{searchTerm=e.target.value.trim();render();});
    resetBtn.onclick=()=>{searchTerm='';activeRole=null;showOnlyFavs=false;sortAsc=true;searchInput.value='';sortBtn.textContent='Saralash: A‚ÜíZ';favFilter.classList.remove('active');render();}
    sortBtn.onclick=()=>{sortAsc=!sortAsc;sortBtn.textContent=sortAsc?'Saralash: A‚ÜíZ':'Saralash: Z‚ÜíA';render();}
    favFilter.onclick=()=>{showOnlyFavs=!showOnlyFavs;favFilter.classList.toggle('active',showOnlyFavs);render();}
    closeModal.onclick=closeDetail;
    modalBackdrop.addEventListener('click',e=>{if(e.target===modalBackdrop)closeDetail();});

    renderRoleFilters();render();
  </script>
</body>
</html>
